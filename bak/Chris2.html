<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- saved from url=(0016)http://localhost -->


<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=7,IE=9" />
    <!--The viewport meta tag is used to improve the presentation and behavior of the samples 
      on iOS devices-->
    <meta name="viewport" content="initial-scale=1, maximum-scale=1,user-scalable=no"/>
    <title>Shapes and Symbols</title>
      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="http://serverapi.arcgisonline.com/jsapi/arcgis/3.0/js/dojo/dijit/themes/claro/claro.css">
    <script type="text/javascript" src="http://serverapi.arcgisonline.com/jsapi/arcgis/?v=3.0"></script>
    <script type="text/javascript">
        jQuery.support.cors = true;
      dojo.require("esri.map");
      dojo.require("esri.layers.agstiled");
      dojo.require("esri.toolbars.draw");
      
      var points = [{"X":"-95.651727","Y":"40.583972","M":"0"},{"X":"-95.652037","Y":"40.584235","M":"0.0243921321516876"},{"X":"-95.652594","Y":"40.584610","M":"0.0634735682216767"},{"X":"-95.653115","Y":"40.584919","M":"0.0981892221869856"},{"X":"-95.653487","Y":"40.585112","M":"0.1218540565389610"},{"X":"-95.653836","Y":"40.585295","M":"0.1441309550425280"},{"X":"-95.654770","Y":"40.585763","M":"0.2029115976060790"},{"X":"-95.655896","Y":"40.586324","M":"0.2736540337615790"},{"X":"-95.656968","Y":"40.586858","M":"0.3409998658165070"},{"X":"-95.657766","Y":"40.587261","M":"0.39134013715225"},{"X":"-95.657766","Y":"40.587261","M":"0.39134013715225"},{"X":"-95.658889","Y":"40.587828","M":"0.4621771730405190"},{"X":"-95.658889","Y":"40.587828","M":"0.4621771730405190"},{"X":"-95.659158","Y":"40.587963","M":"0.4791140836150760"},{"X":"-95.660865","Y":"40.588814","M":"0.5863760821026220"},{"X":"-95.662453","Y":"40.589613","M":"0.6864371742991880"},{"X":"-95.664699","Y":"40.590735","M":"0.8276519641317730"},{"X":"-95.666516","Y":"40.591644","M":"0.9419421821276270"},{"X":"-95.668511","Y":"40.592656","M":"1.06795803824644"},{"X":"-95.669402","Y":"40.593090","M":"1.12356096867874"},{"X":"-95.669980","Y":"40.593397","M":"1.16060628620898"},{"X":"-95.670430","Y":"40.593660","M":"1.19042457485035"},{"X":"-95.671081","Y":"40.594069","M":"1.23478632399113"},{"X":"-95.671754","Y":"40.594567","M":"1.28410806383781"},{"X":"-95.672169","Y":"40.594917","M":"1.31665315828756"},{"X":"-95.672431","Y":"40.595169","M":"1.33883446356537"},{"X":"-95.672620","Y":"40.595360","M":"1.35533827115352"},{"X":"-95.672620","Y":"40.595360","M":"1.35533827115352"},{"X":"-95.673012","Y":"40.595756","M":"1.38956034139833"},{"X":"-95.673012","Y":"40.595756","M":"1.38956034139833"},{"X":"-95.673140","Y":"40.595885","M":"1.40071804464913"},{"X":"-95.673206","Y":"40.595955","M":"1.40666455302216"},{"X":"-95.673206","Y":"40.595955","M":"1.40666455302216"},{"X":"-95.674273","Y":"40.597089","M":"1.50293248835224"},{"X":"-95.675208","Y":"40.598115","M":"1.58911028261935"},{"X":"-95.675928","Y":"40.598917","M":"1.65614881610997"},{"X":"-95.677014","Y":"40.600093","M":"1.75535583666325"},{"X":"-95.677512","Y":"40.600639","M":"1.80122877942834"},{"X":"-95.677512","Y":"40.600639","M":"1.80122877942834"},{"X":"-95.677557","Y":"40.600687","M":"1.80529869440508"},{"X":"-95.677788","Y":"40.600940","M":"1.82656203102343"},{"X":"-95.6792","Y":"40.602475","M":"1.95588582841871"},{"X":"-95.680017","Y":"40.603367","M":"2.03093022379809"},{"X":"-95.681190","Y":"40.604647","M":"2.13863542768614"},{"X":"-95.681191","Y":"40.604648","M":"2.13863542768614"},{"X":"-95.681785","Y":"40.605296","M":"2.19316601674376"},{"X":"-95.682763","Y":"40.606350","M":"2.28221980371792"},{"X":"-95.683525","Y":"40.6071","M":"2.34765542780034"},{"X":"-95.684047","Y":"40.607555","M":"2.38934917209771"},{"X":"-95.685039","Y":"40.608329","M":"2.46398772013902"},{"X":"-95.686091","Y":"40.609074","M":"2.53948741253111"},{"X":"-95.688176","Y":"40.610528","M":"2.68806766231034"},{"X":"-95.690366","Y":"40.612040","M":"2.84342149536229"},{"X":"-95.692596","Y":"40.613606","M":"3.00283855937217"},{"X":"-95.693696","Y":"40.614371","M":"3.08112594162586"},{"X":"-95.696329","Y":"40.616204","M":"3.26860237028213"},{"X":"-95.698578","Y":"40.617769","M":"3.42870350602545"},{"X":"-95.700990","Y":"40.619452","M":"3.60061894022899"},{"X":"-95.703724","Y":"40.621362","M":"3.79559028507993"},{"X":"-95.705968","Y":"40.622919","M":"3.95511872627766"},{"X":"-95.708155","Y":"40.624446","M":"4.11103732716566"},{"X":"-95.709558","Y":"40.625416","M":"4.21061478901938"},{"X":"-95.710802","Y":"40.626253","M":"4.29784511382250"},{"X":"-95.712160","Y":"40.627117","M":"4.39083452021992"},{"X":"-95.712658","Y":"40.627415","M":"4.42411681359694"},{"X":"-95.713204","Y":"40.627736","M":"4.460364431468"},{"X":"-95.713974","Y":"40.628179","M":"4.51107703979138"},{"X":"-95.714998","Y":"40.628738","M":"4.57728599792951"},{"X":"-95.715872","Y":"40.629207","M":"4.63347190999138"},{"X":"-95.717344","Y":"40.629975","M":"4.72723859642939"},{"X":"-95.720115","Y":"40.631422","M":"4.90379904389661"},{"X":"-95.722088","Y":"40.632445","M":"5.02922797318886"},{"X":"-95.724802","Y":"40.633865","M":"5.20226016242718"},{"X":"-95.727025","Y":"40.635026","M":"5.34390454681388"},{"X":"-95.730198","Y":"40.636682","M":"5.54603284347483"},{"X":"-95.733108","Y":"40.638209","M":"5.73172705593368"},{"X":"-95.735163","Y":"40.639280","M":"5.86257313938887"},{"X":"-95.736253","Y":"40.639860","M":"5.93244298245311"},{"X":"-95.736253","Y":"40.639860","M":"5.93244298245311"},{"X":"-95.736722","Y":"40.640110","M":"5.96252349466556"},{"X":"-95.737539","Y":"40.640516","M":"6.01378410660289"},{"X":"-95.738064","Y":"40.640795","M":"6.04742250072165"},{"X":"-95.738749","Y":"40.641182","M":"6.09223800132186"},{"X":"-95.739416","Y":"40.641612","M":"6.13815528880744"},{"X":"-95.739797","Y":"40.641891","M":"6.16592698753326"},{"X":"-95.740206","Y":"40.642201","M":"6.19624586057808"},{"X":"-95.740748","Y":"40.642673","M":"6.23950493010141"},{"X":"-95.741151","Y":"40.643054","M":"6.27325760928529"},{"X":"-95.741848","Y":"40.643791","M":"6.33591741491135"},{"X":"-95.742633","Y":"40.644645","M":"6.40783514222475"},{"X":"-95.743988","Y":"40.646105","M":"6.53117703497065"},{"X":"-95.744821","Y":"40.646996","M":"6.60663377959041"},{"X":"-95.745889","Y":"40.648141","M":"6.70352561672233"},{"X":"-95.747215","Y":"40.649570","M":"6.82423959538424"},{"X":"-95.747917","Y":"40.650328","M":"6.88822952936396"},{"X":"-95.748766","Y":"40.651251","M":"6.96597279217695"},{"X":"-95.749863","Y":"40.652441","M":"7.06627727268395"},{"X":"-95.750473","Y":"40.653101","M":"7.12195583544345"},{"X":"-95.750843","Y":"40.653502","M":"7.15576585813843"},{"X":"-95.751697","Y":"40.654414","M":"7.23303988878656"},{"X":"-95.752326","Y":"40.655099","M":"7.29070299292591"},{"X":"-95.753257","Y":"40.656106","M":"7.37566247857453"},{"X":"-95.753701","Y":"40.656584","M":"7.41605358885913"},{"X":"-95.754866","Y":"40.657823","M":"7.52117928517853"},{"X":"-95.755531","Y":"40.658582","M":"7.58412375328131"},{"X":"-95.756531","Y":"40.659656","M":"7.67494833177320"},{"X":"-95.757643","Y":"40.660853","M":"7.77609739666834"},{"X":"-95.758360","Y":"40.661625","M":"7.84132726746092"},{"X":"-95.759823","Y":"40.663204","M":"7.97463731016545"},{"X":"-95.760647","Y":"40.664089","M":"8.04947646942275"},{"X":"-95.761491","Y":"40.665002","M":"8.12649908807473"},{"X":"-95.762725","Y":"40.666325","M":"8.23844276559406"},{"X":"-95.763794","Y":"40.667490","M":"8.33648361859069"},{"X":"-95.764570","Y":"40.668340","M":"8.40789637037710"},{"X":"-95.765050","Y":"40.668857","M":"8.45157346680156"},{"X":"-95.765050","Y":"40.668857","M":"8.45157346680156"},{"X":"-95.765235","Y":"40.669057","M":"8.46844903300887"},{"X":"-95.765682","Y":"40.669539","M":"8.50915385277809"},{"X":"-95.765682","Y":"40.669539","M":"8.50915385277809"},{"X":"-95.766214","Y":"40.670113","M":"8.55761824363312"},{"X":"-95.767409","Y":"40.671383","M":"8.66539301214538"},{"X":"-95.769204","Y":"40.673310","M":"8.82836592036753"},{"X":"-95.770951","Y":"40.675187","M":"8.98706540213215"},{"X":"-95.772722","Y":"40.677093","M":"9.14812455091374"},{"X":"-95.774391","Y":"40.678890","M":"9.29994987129485"},{"X":"-95.776231","Y":"40.680859","M":"9.46664747652995"},{"X":"-95.777460","Y":"40.682182","M":"9.57843064374728"},{"X":"-95.777920","Y":"40.682698","M":"9.62145001870114"},{"X":"-95.778704","Y":"40.683634","M":"9.69802944936564"},{"X":"-95.779490","Y":"40.684619","M":"9.77753398626616"},{"X":"-95.779848","Y":"40.685113","M":"9.81645423021640"},{"X":"-95.779848","Y":"40.685113","M":"9.81645423021640"},{"X":"-95.780966","Y":"40.686656","M":"9.93801534721416"},{"X":"-95.781967","Y":"40.688016","M":"10.045556692949"},{"X":"-95.782565","Y":"40.688840","M":"10.11049717117970"},{"X":"-95.782623","Y":"40.688920","M":"10.116800562947"},{"X":"-95.782623","Y":"40.688920","M":"10.116800562947"},{"X":"-95.782733","Y":"40.689073","M":"10.12883230799580"},{"X":"-95.782812","Y":"40.689181","M":"10.13735972458180"},{"X":"-95.782989","Y":"40.689425","M":"10.15658759175950"},{"X":"-95.782989","Y":"40.689425","M":"10.15658759175950"},{"X":"-95.783073","Y":"40.689541","M":"10.16572488211030"},{"X":"-95.784362","Y":"40.691332","M":"10.30660203424280"},{"X":"-95.785362","Y":"40.692719","M":"10.41574512587440"},{"X":"-95.785362","Y":"40.692719","M":"10.41574512587440"},{"X":"-95.786228","Y":"40.693922","M":"10.51037502945920"},{"X":"-95.787625","Y":"40.695846","M":"10.66202229594050"},{"X":"-95.788899","Y":"40.697597","M":"10.80009950903410"},{"X":"-95.790271","Y":"40.699489","M":"10.94917793368910"},{"X":"-95.791678","Y":"40.701424","M":"11.10174049633310"},{"X":"-95.793072","Y":"40.703362","M":"11.25415428191120"},{"X":"-95.794484","Y":"40.705307","M":"11.40744557540710"},{"X":"-95.795605","Y":"40.706861","M":"11.52973924404170"},{"X":"-95.796899","Y":"40.708626","M":"11.669165539149"},{"X":"-95.798792","Y":"40.711269","M":"11.876814798482"},{"X":"-95.799720","Y":"40.712532","M":"11.97663634589220"},{"X":"-95.799720","Y":"40.712532","M":"11.97663634589220"},{"X":"-95.799889","Y":"40.712762","M":"11.99481463653930"},{"X":"-95.799889","Y":"40.712762","M":"11.99481463653930"},{"X":"-95.800159","Y":"40.713129","M":"12.02382930383030"},{"X":"-95.801422","Y":"40.714830","M":"12.15860618452750"},{"X":"-95.802191","Y":"40.715716","M":"12.23185304946120"},{"X":"-95.802766","Y":"40.716304","M":"12.28241305317320"},{"X":"-95.803471","Y":"40.716955","M":"12.34060429223530"},{"X":"-95.804120","Y":"40.717496","M":"12.39113452102620"},{"X":"-95.804718","Y":"40.717945","M":"12.43523239754310"},{"X":"-95.806121","Y":"40.718943","M":"12.53604353604050"},{"X":"-95.808690","Y":"40.720735","M":"12.71897460060470"},{"X":"-95.810367","Y":"40.721920","M":"12.83909919880480"},{"X":"-95.811480","Y":"40.722677","M":"12.917454283778"},{"X":"-95.812658","Y":"40.723510","M":"13.00186231332540"},{"X":"-95.812658","Y":"40.723510","M":"13.00186231332540"},{"X":"-95.812720","Y":"40.723554","M":"13.00631193025490"},{"X":"-95.813283","Y":"40.723952","M":"13.04664736920670"},{"X":"-95.813820","Y":"40.724377","M":"13.08731557088150"},{"X":"-95.814397","Y":"40.724891","M":"13.13394547851990"},{"X":"-95.814732","Y":"40.725195","M":"13.16131192965720"},{"X":"-95.815085","Y":"40.725606","M":"13.19518102524360"},{"X":"-95.815473","Y":"40.726059","M":"13.232480365955"},{"X":"-95.815898","Y":"40.726648","M":"13.27883213210260"},{"X":"-95.816336","Y":"40.727336","M":"13.33156753810170"},{"X":"-95.816614","Y":"40.727888","M":"13.37234661045650"},{"X":"-95.816820","Y":"40.728377","M":"13.40777044092920"},{"X":"-95.816986","Y":"40.728817","M":"13.439349357713"},{"X":"-95.817113","Y":"40.729215","M":"13.46760285167520"},{"X":"-95.817201","Y":"40.729574","M":"13.49279544598780"},{"X":"-95.817279","Y":"40.729916","M":"13.51674082491450"},{"X":"-95.817351","Y":"40.730379","M":"13.54890371464940"},{"X":"-95.817397","Y":"40.730854","M":"13.58176059818790"},{"X":"-95.817411","Y":"40.731133","M":"13.60102158395520"},{"X":"-95.817422","Y":"40.731715","M":"13.64117519019250"},{"X":"-95.817425","Y":"40.732445","M":"13.69153471881620"},{"X":"-95.817426","Y":"40.733271","M":"13.74851667322320"},{"X":"-95.817432","Y":"40.734894","M":"13.86048036773670"},{"X":"-95.817434","Y":"40.736524","M":"13.97292660419010"},{"X":"-95.817441","Y":"40.738176","M":"14.08689109322680"},{"X":"-95.817454","Y":"40.739860","M":"14.20306457052150"},{"X":"-95.817463","Y":"40.741562","M":"14.32047875274620"},{"X":"-95.817475","Y":"40.743232","M":"14.43568621538440"},{"X":"-95.817483","Y":"40.744912","M":"14.55158260705510"},{"X":"-95.817498","Y":"40.746643","M":"14.67099913183760"},{"X":"-95.817484","Y":"40.748245","M":"14.78151641078690"},{"X":"-95.817499","Y":"40.750254","M":"14.92011063701090"},{"X":"-95.817518","Y":"40.751441","M":"15.00200259933270"},{"X":"-95.817507","Y":"40.752418","M":"15.06940397459270"},{"X":"-95.817507","Y":"40.752418","M":"15.06940397459270"},{"X":"-95.817507","Y":"40.752439","M":"15.07085220443150"},{"X":"-95.817523","Y":"40.755013","M":"15.24842314629570"},{"X":"-95.817528","Y":"40.755424","M":"15.27677745400280"},{"X":"-95.817511","Y":"40.756129","M":"15.32542053662630"},{"X":"-95.817476",
"Y":"40.756469","M":"15.34894734002090"}];
      
      function getPoints() {
          var getPointsUrl = "http://ec2-23-20-37-199.compute-1.amazonaws.com/IowaMavricService/IowaMavricService.svc/LatLong/I%2029%20N/0/151.8";
         // $.ajaxSetup({ "async": false });
        
          $.getJSON(getPointsUrl, function (data) {
             drawRoute(data)
          });
          // $.ajaxSetup({ "async": true });
      }
      
      
      var map, tb;
     var locatorGraphic;
      
      function init() {
         var initExtent = new esri.geometry.Extent({"xmin":-12836528.782095946,"ymin":-939258.2035679615,"xmax":7200979.560687953,"ymax":9079495.967823988,"spatialReference":{"wkid":4326}});
         map = new esri.Map("map",{extent:initExtent});
         dojo.connect(map, "onLoad", initToolbar);

         map.addLayer(new esri.layers.ArcGISTiledMapServiceLayer("http://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"));
		     		    
		    //map.addLayer(new esri.layers.ArcGISTiledMapServiceLayer("http://server.arcgisonline.com/ArcGIS/rest/services/ESRI_StreetMap_World_2D/MapServer"));
      }
      
       function initToolbar(map) {
        tb = new esri.toolbars.Draw(map);
        dojo.connect(tb, "onDrawEnd", addGraphic);
		  // testPoint();
		
      }

     // assumes ROUTE is an array of ESRI.Geometry.Points
			function setMapExtents(route)
			{
				var minX,maxX,minY,maxY;
			 	
				//prime values before loop
				minX = maxX = route[0].x;
				minY = maxY = route[0].y;
				
				for(var i = 1; i < route.length;i++)
				{
			
					if (route[i].x < minX)
					{
						minx = route[i].x;
					}
					if (route[i].x > maxX)
					{
						maxX = route[i].x;
					}
					if (route[i].y < minY)
					{
						minY = route[i].y;
					}
					if (route[i].y > maxY)
					{
						maxY = route[i].y;
					}
				
				}
		;
    var tmpWidth = maxX - minX;
		var tmpHeight = maxY - minY;
        minX = minX - tmpWidth / 20;
				maxX = maxX + tmpWidth  / 20;
				minY = minY - tmpHeight / 20;
				maxY = maxY + tmpHeight / 20;
     
      map.setExtent(new esri.geometry.Extent({
        "xmin": minX,
        "ymin": minY,
        "xmax": maxX,
        "ymax": maxY,
        "spatialReference": {
            "wkid": 4326
        }
    			}),true);


			}

          
    	  
	  function drawRoute(jsonPoints)
	  {
	   
	   var arr = [];   
	   var polyline = new esri.geometry.Polyline(new esri.SpatialReference({wkid:4326}));
     var polylineSymbol = new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID, new dojo.Color([0,0,205]), 4);
     var attrName;
	   var attrValue;
	   
	   	
	   	for ( var i = 0; i < jsonPoints.length ;i++)
	   	{
	   		var obj = jsonPoints[i];
	      var tmpPoint = new Object();		
	         		
	   		for(var key in obj)
	  		{             
	  			 attrName = key;             
	  			 attrValue = obj[key];
	  	     
	  		  			
	  			if(attrName.toUpperCase() == "X")
	  			{
	  			   tmpPoint.X = attrValue;
	  			   
	  			}
	  			if(attrName.toUpperCase()== "Y")
	  			{
	  			   tmpPoint.Y = attrValue;
	  
		      // must convert X,Y coords to webmercator to plot correctly 
		     		var convertGeom = esri.geometry.geographicToWebMercator(new esri.geometry.Point(tmpPoint.X, tmpPoint.Y,map.spatialReference));
		     
		     		tmpPoint = null;
	  			  				
	  				arr.push(convertGeom);
	  			}
	  			  
	  		 } 
	  	} 
	  	
	  	setMapExtents(arr);
	  	polyline.addPath(arr);
	  	//map.graphics.clear();
	  	map.graphics.add(new esri.Graphic(polyline, polylineSymbol)); 
	  	

	  }
	  
	  function testPoint() {  //determine point location of Mustang, OK
	 // alert(map.spatialReference.wkid);
		var baseGeom = new esri.geometry.Point( -97.722778, 35.392778, map.spatialReference);
		// must convert X,Y coords to webmercator to plot correctly 
		var convertGeom = esri.geometry.geographicToWebMercator(baseGeom);
		var sym = new esri.symbol.SimpleMarkerSymbol().setColor(new dojo.Color([0,0,205]));
	
 

		var gr = new esri.Graphic(convertGeom, sym);
		map.graphics.add(gr);
	  }
	  var testX = -97.722778;
	  var testY = 35.392778;

 function drawLocationPoint(X, Y ) {  //determine point location 
 	
 		//map.graphics.remove(locatorGraphic);
	  
		// must convert X,Y coords to webmercator to plot correctly 
		var convertGeom = esri.geometry.geographicToWebMercator(new esri.geometry.Point(X, Y, map.spatialReference));
	
		var sym = new esri.symbol.SimpleMarkerSymbol().setSize(12).setStyle(esri.symbol.SimpleMarkerSymbol.STYLE_DIAMOND).setColor(new dojo.Color("32CD32"));
	
		this.locatorGraphic = new esri.Graphic(convertGeom, sym);
		    this.locatorGraphic.id =  "locatorGraphic";
		    
		    
			dojo.forEach(map.graphics.graphics, function(g) {
          if ( g && g.id === "locatorGraphic" ) {
            //remove graphic with specific id
            map.graphics.remove(g); 
           }
        }, this);
     
     this.map.graphics.add(this.locatorGraphic);
		
        // locatorLayer.clear();
           //map.getLayer('locatorLayer').clear();
           //map.graphics.remove(map.graphics.graphics[map.graphics.graphics.length -1]);

       // locatorLayer.add(locatorGraphic);
       // map.graphics.add(locatorGraphic);
      }



      function addGraphic(geometry) {
	  //alert(geometry.x + " - " + geometry.y);
        var symbol = dojo.byId("symbol").value;
        if (symbol) {
            symbol = eval(symbol);
        }
        else {
          var type = geometry.type;
          if (type === "point" || type === "multipoint") {
            symbol = tb.markerSymbol;
          }
          else if (type === "line" || type === "polyline") {
            symbol = tb.lineSymbol;
          }
          else {
            symbol = tb.fillSymbol;
          }
        }

        map.graphics.add(new esri.Graphic(geometry, symbol));
      }

      dojo.addOnLoad(init);
    </script>
  </head>
  <body class="claro">
  	<button onclick="getPoints()">Draw Line</button>
  	<button onclick="drawLocationPoint(testX, testY)">Track Location</button>
    

    
    <div id="map" style="width:1024px; height:512px; border:2px solid #000;" class="claro"></div>

    <br />
    Zoom Slider :
    <input type="button" value="Hide" onclick="map.hideZoomSlider()" />
    <input type="button" value="Show" onclick="map.showZoomSlider()" />

  </body class="claro">
</html>